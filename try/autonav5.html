<html>
    <head>
        <style>
            nav ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

nav ul li {
  display: inline-block;
  position: relative;
}

nav ul li ul {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  background-color: #fff;
  border: 1px solid #ccc;
  z-index: 1;
}

nav ul li:hover ul {
  display: block;
}

nav ul li a {
  display: block;
  padding: 10px;
  color: #333;
  text-decoration: none;
}

nav ul li ul li a {
  display: block;
  padding: 5px 10px;
  color: #333;
  text-decoration: none;
}

nav ul li ul li a:hover {
  background-color: #f7f7f7;
}

nav ul li:hover > a {
  background-color: #f7f7f7;
}

h1 {
  margin-top: 50px;
}

nav {
  position: fixed;
  top: 0;
  width: 100%;
  background-color: #fff;
  border-bottom: 1px solid #ccc;
}

nav ul li a.active {
  font-weight: bold;
}


        </style>
    </head>
    <body>
        <nav id="navbar"></nav>
      
        <main>
          <h1>Section 1</h1>
          <h2>Subsection 1.1</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce vitae dicta sunt explicabo.</p>
          <h2>Subsection 1.2</h2>
          <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p>
          <h3>Subsection 1.2.1</h3>
          <p>Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.</p>
          <h1>Section 2</h1>
          <h2>Subsection 2.1</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce vitae dicta sunt explicabo.</p>
          <h2>Subsection 2.2</h2>
          <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p>
          <h3>Subsection 2.2.1</h3>
          <p>Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.</p>
        </main>
      
        <script>
         // Get all the headings on the page
const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');

// Create a new unordered list element for the navigation links
const navList = document.createElement('ul');

// Loop through all the headings and create a new list item and link for each one
headings.forEach((heading, index) => {
  const listItem = document.createElement('li');
  const link = document.createElement('a');
  link.textContent = heading.textContent;
  link.href = `#${index}`;

  // Add a class of "active" to the first link
  if (index === 0) {
    link.classList.add('active');
  }

  // Create a new nested unordered list for the subheadings
  if (heading.tagName !== 'H1') {
    const subList = document.createElement('ul');
    const subListItem = document.createElement('li');
    const subLink = document.createElement('a');
    subLink.textContent = heading.textContent;
    subLink.href = `#${index}`;
    subListItem.appendChild(subLink);
    subList.appendChild(subListItem);

    // Loop through the previous siblings of the heading to find any subheadings
    let previousSibling = heading.previousElementSibling;
    while (previousSibling) {
      if (previousSibling.tagName === 'H1') {
        // If a new H1 is found, add the subList to the previous H2's list item
        listItem.appendChild(subList);
        break;
      } else if (previousSibling.tagName !== 'H2') {
        // If a non-H2 heading is found, add a new list item for the subheading
        const newSubListItem = document.createElement('li');
        const newSubLink = document.createElement('a');
        newSubLink.textContent = previousSibling.textContent;
        newSubLink.href = `#${index - 1}`;
        newSubListItem.appendChild(newSubLink);
        subList.insertBefore(newSubListItem, subList.firstChild);
      }
      previousSibling = previousSibling.previousElementSibling;
    }

    // If no previous H1 is found, add the subList to the main list
    if (!previousSibling) {
      const dropdown = document.createElement('li');
      const dropdownToggle = document.createElement('a');
      dropdownToggle.textContent = 'â–¼';
      dropdownToggle.href = '#';
      dropdownToggle.classList.add('dropdown-toggle');
      dropdown.appendChild(dropdownToggle);
      dropdown.appendChild(subList);
      listItem.appendChild(dropdown);

      // Add an event listener to toggle the dropdown when the user clicks on the toggle link
      dropdownToggle.addEventListener('click', (event) => {
        event.preventDefault();
        dropdown.classList.toggle('open');
      });
    }
  } else {
    listItem.appendChild(link);
  }

  navList.appendChild(listItem);

  // Add an ID to each heading to match the href of the corresponding link
  heading.id = index;
});

// Add the navigation list to the navbar
const navbar = document.getElementById('navbar');
navbar.appendChild(navList);

// Change the active link when the user scrolls to a new section of the page
document.addEventListener('scroll', () => {
  const activeLink = navList.querySelector('a.active');
  const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;

  for (let i = headings.length - 1; i >= 0; i--) {
    if (headings[i].offsetTop - navbar.offsetHeight <= scrollTop) {
      activeLink.classList.remove('active');

         // Set the new active link
const newActiveLink = navList.querySelector(a[href="#${i}"]);
newActiveLink.classList.add('active');
break;
}
}
});
        </script>
      </body>
      
</html>